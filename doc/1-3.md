# UI変更の実装計画

## 概要
左側にサイドメニューを作成して、**Download**、**Explore**、**Log**、**Setting** の4つの項目を作成し、それぞれの項目が選択された際に右側のメインパネルが切り替わるように実装します。

## 現在の構造分析

### 既存のレイアウト構造
- `Layout`コンポーネントが既に存在し、Header、Main、Sidebar、Content、Footerの構造を提供
- 現在のSidebarには`FolderTree`コンポーネントが配置されている
- メインコンテンツエリアには`ImageGrid`が表示されている

### 技術スタック
- React 19.1.1
- TypeScript
- Electron（デスクトップアプリケーション）
- Webpack（ビルドツール）

## 実装計画

### 1. サイドメニューコンポーネントの作成

#### ファイル構造
```
src/renderer/components/SideMenu/
├── SideMenu.tsx
├── SideMenu.css
└── index.ts
```

#### 機能要件
- 4つのメニュー項目（Download, Explore, Log, Setting）を表示
- 選択状態の管理（activeItemをstateで管理）
- 各項目にアイコンとラベルを表示
- クリック時にメインパネルを切り替えるコールバックを実行

### 2. 各パネルコンポーネントの作成

#### DownloadPanel
- **パス**: `src/renderer/components/Panels/DownloadPanel.tsx`
- **機能**: ダウンロード管理画面
- **内容**:
  - 既存の`DownloadDialog.tsx`の機能を統合
  - ダウンロードキューの表示
  - 進捗状況の表示
  - ダウンロード履歴

#### ExplorePanel
- **パス**: `src/renderer/components/Panels/ExplorePanel.tsx`
- **機能**: 画像探索画面
- **内容**:
  - 既存の`ImageGrid`コンポーネントを活用
  - `FolderTree`と`ImageGrid`の組み合わせ
  - 現在の画像ビューア機能をそのまま維持

#### LogPanel
- **パス**: `src/renderer/components/Panels/LogPanel.tsx`
- **機能**: ログ表示画面
- **内容**:
  - アプリケーションログの表示
  - フィルタリング機能
  - ログレベル別の表示（Info, Warning, Error）
  - クリア機能

#### SettingPanel
- **パス**: `src/renderer/components/Panels/SettingPanel.tsx`
- **機能**: 設定画面
- **内容**:
  - アプリケーション設定
  - テーマ設定
  - パス設定
  - その他のオプション

### 3. App.tsxの修正

#### 状態管理
```typescript
const [activePanel, setActivePanel] = useState<'download' | 'explore' | 'log' | 'setting'>('explore');
```

#### レイアウト構造
```tsx
<Layout>
  <Layout.Header>
    <Toolbar />
  </Layout.Header>

  <Layout.Main>
    <Layout.Sidebar>
      <SideMenu
        activeItem={activePanel}
        onItemClick={setActivePanel}
      />
    </Layout.Sidebar>

    <Layout.Content>
      {activePanel === 'download' && <DownloadPanel />}
      {activePanel === 'explore' && <ExplorePanel />}
      {activePanel === 'log' && <LogPanel />}
      {activePanel === 'setting' && <SettingPanel />}
    </Layout.Content>
  </Layout.Main>

  <Layout.Footer>
    <StatusBar />
  </Layout.Footer>
</Layout>
```

### 4. スタイリング

#### SideMenu.css
- メニュー項目のホバー効果
- アクティブ状態のハイライト
- アイコンとテキストの配置
- 適切なパディングとマージン

#### 各パネルのCSS
- 各パネル独自のレイアウト
- スクロール可能な領域の設定
- レスポンシブデザイン

### 5. 実装順序

1. **Phase 1: 基本構造の実装**
   - SideMenuコンポーネントの作成
   - 各パネルコンポーネントの作成（プレースホルダー）
   - App.tsxの修正

2. **Phase 2: パネルの詳細実装**
   - ExplorePanel: 既存機能の移行
   - DownloadPanel: DownloadDialog.tsxの統合
   - LogPanel: ログ表示機能の実装
   - SettingPanel: 設定項目の実装

3. **Phase 3: スタイリングと仕上げ**
   - 各コンポーネントのスタイリング
   - アニメーション効果の追加
   - エラーハンドリング
   - テストの実装

## 技術的考慮事項

### パフォーマンス
- 各パネルのレイジーローディングを検討
- 不要な再レンダリングを防ぐためのメモ化

### アクセシビリティ
- キーボードナビゲーション対応
- ARIA属性の適切な使用
- フォーカス管理

### 拡張性
- 新しいパネルを追加しやすい構造
- パネル間のデータ共有方法の検討
- コンポーネントの再利用性

## まとめ
この実装により、ユーザーは左側のサイドメニューから機能を選択し、右側のメインパネルで各機能を利用できるようになります。既存のレイアウト構造を活用することで、効率的に実装を進めることができます。